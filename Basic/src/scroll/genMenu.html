<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        scroll-behavior: smooth;
    }

    body {
        width: 100vw;
        min-height: 100vh;
        background-color: #333;
        color: #bbb;
        padding: 50px 40px;
    }

    main article * {
        scroll-margin-top: 60px;
    }

    header {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 50px;
        background-color: #000;
        color: #fff;
        line-height: 50px;
        padding-left: 20px;
        font-weight: 900;
    }

    main {
        display: flex;
        column-gap: 20px;
        justify-content: center;
        padding-top: 30px;
    }

    main menu {
        flex-shrink: -1;
        flex-grow: -1;
        min-width: 250px;
    }

    main #menu {
        position: fixed;
        top: 120px;
        width: 250px;
    }

    main #menu * {
        font-size: 18px;
        font-weight: 700;
        line-height: 1.2em;
        transition: .6s;
    }

    main #menu *.active {
        color: orange;
    }

    main #menu h1 {
        color: #777;
    }

    main #menu h2 {
        margin: 20px 0 5px 0;
    }

    main #menu h3 {
        font-size: 16px;
        font-weight: 500;
        margin: 8px 0;
        padding-left: 1em;
    }

    main article {
        max-width: 800px;
    }

    article h1 {
        font-size: 40px;
        color: #fff;
        margin: 30px 0;
    }

    article h2 {
        font-size: 30px;
        color: #50b72d;
        margin: 20px 0;
    }

    article h3 {
        font-size: 20px;
        color: #ebe126;
        margin: 10px 0;
    }

    article p {
        text-align: justify;
        text-indent: 1.8em;
        line-height: 2em;
        margin: .5em;
    }
</style>

<body>
    <header>
        HEADER: 占一下位置
    </header>
    <main>
        <menu>
            <div id="menu">
                <h1>Menu</h1>
            </div>
        </menu>
        <article>
            <h1>What is a blog? </br>Definition, types, benefits and why you need one</h1>
            <h2>1 What is a blog?</h2>
            <h3>Definition of a blog</h3>
            <p>
                Blogs are a type of regularly updated websites that provide insight into a certain topic. The word blog
                is a combined version of the words “web” and “log.” At their inception, blogs were simply an online
                diary where people could keep a log about their daily lives on the web. They have since morphed into an
                essential forum for individuals and businesses alike to share information and updates. In fact, many
                people even make money blogging as professional full-time bloggers.
            </p>
            <p>
                As the publishing world has evolved, and more of it has moved online, blogs have come to occupy a
                central position in this digital content world. Blogs are a source of knowledge, opinion and concrete
                advice. While not yet posed to replace journalism as an art form, people increasingly look to trusted
                blogs to find answers to their questions, or to learn how to do something.
            </p>
            <p>
                Blogs are always evolving both in terms of how they're created and what they are used for. They can be a
                vehicle for creativity and for marketing. They're also increasingly created and read on mobile apps, as
                mobile blogging also comes into its own.
            </p>
            <h2>2 What does a blog look like?</h2>
            <p>
                A blog consists of a series of articles or posts. While the appearance of your blog can vary depending
                on the platform and design choices made by you as the blogger, here are some common elements you may
                find in a typical blog and include in your own, keeping in mind the importance of user experience design
                and web design:
            </p>
            <h3>Header</h3>
            <p>
                The top section of a blog often contains your blog's title or logo, along with a navigation menu that
                helps visitors explore different sections or categories of your blog. You might decide to categorize
                blogs from the same topic together, for repeat readers who are looking specifically from posts from that
                area of interest.
            </p>
            <h3>Content body</h3>
            <p>
                This is where the content of your blog posts is displayed. Each post usually includes a title, author
                name, date of publication, and the main content of the post, which can include text, images, videos, or
                other multimedia.
            </p>
            <h3>Sidebar</h3>
            <p>
                A blog may have a sidebar on one or both sides of the main content area. The sidebar often contains
                additional information or features such as a search bar, recent posts, popular posts, categories, tags,
                social media links, an about section, and advertisements. You can this part of your blog to help
                establish your blogs navigation, and site hierarchy to users and search engines.
            </p>
            <h2>3 Types of blogs</h2>
            <p>
                Different types of blogs cover varying topics, from food and fashion to marketing. Blogs are composed of
                individual posts on more specific subjects within the blog’s field of expertise. To get started with
                blogs on social media, check out microblogging. These posts often serve as a platform for discussions,
                as many blogs have active comments sections. You can think of a blog almost as a newspaper that adds
                articles and continually maintains the archive.
            </p>
            <p>
                Whether you’ve seen stand-alone blogs or blogs as website sections, you’ve probably encountered blog
                examples all over the internet. Some of the most popular types of blogs in the blogosphere include:
            </p>
            <h2>4 Website vs blog</h2>
            <p>
                As you now know, a blog often deals with a given topic and is updated with regular posts, mostly in the
                form of articles. Websites, however, are often broken down into inner explanatory pages, each with
                varying purposes. This can mean anything from an FAQ page to a welcoming homepage design. These pages
                are occasionally updated, making a website more static than a blog. Oftentimes websites have internal
                blogs, while other websites are entirely blogs without any additional pages.
            </p>
            <p>
                When blogs are a section of a larger website, the website provides the bulk of the information and uses
                a blog feature to keep users updated and engaged. For example, think of an online store that also offers
                a blog about their various products and how to use them.
            </p>
            <p>
                Blogs that make up the entire website usually rely on the content itself rather than sell a product or
                market a service.
            </p>
            <p>
                When blogs are a section of a larger website, the website provides the bulk of the information and uses
                a blog feature to keep users updated and engaged. For example, think of an online store that also offers
                a blog about their various products and how to use them.
            </p>
        </article>
    </main>
    <script>

        class MenuGenerator {
            constructor(titleNameList = ['h2', 'h3']) {
                this.menu = document.querySelector('main #menu');
                // init position
                this.menu.style.left = document.querySelector('main menu').offsetLeft;

                // 预处理
                let titles = ""
                titleNameList.forEach(titleName => {
                    titles += `main article ${titleName}, `
                });
                this.titles = document.querySelectorAll(titles.slice(0, -2));
            }

            activate() {
                let idx = 0;
                for (let t of this.titles) {
                    let offset = t.offsetTop - document.documentElement.scrollTop;
                    if (offset > 20) {
                        console.log(idx)
                        // clear
                        this.menu.childNodes.forEach(item => item.className = "");

                        // activate
                        if(idx == 0 && offset<this.maxOffset) {
                            document.querySelector(`main #menu *[titleId="${t.id}"]`).className = "active";
                        } else {
                            document.querySelector(`main #menu *[titleId="${this.titles[idx-1].id}"]`).className = "active";
                        }
                        
                        return;
                    }
                    idx += 1;
                }
            }

            genMenu() {
                let idx = 0;
                this.titles.forEach(item => {
                    // 正文标题处理
                    item.id = `${idx}`;

                    // 目录生成
                    let curItem = document.createElement(`${item.tagName}`);
                    curItem.innerText = item.innerText;
                    curItem.setAttribute("titleId", `${idx}`);

                    // 添加滚动事件
                    curItem.addEventListener("click", (e) => {
                        location.href = `#${e.target.getAttribute("titleId")}`;
                    })

                    this.menu.appendChild(curItem);

                    idx += 1
                })
            }

            scrollActive() {
                this.activate();
                this.maxOffset = document.body.clientHeight;

                document.addEventListener("scroll", () => {
                    this.activate();
                })
                document.addEventListener("resize", () => {
                    this.maxOffset = document.body.clientHeight;
                })
            }
        }
        window.onload = () => {
            // genMenu
            const menuGenerator = new MenuGenerator(["h2", "h3"]);
            menuGenerator.genMenu();
            menuGenerator.scrollActive();
        }
    </script>
</body>

</html>